---
import { generateFakePosts } from "../lib/fakeData";

// Generar datos de prueba
const posts = generateFakePosts(6);
const people = posts.slice(0, 6).map((post) => ({
  name: post.author.name,
  email: `${post.author.name.replace(/\s+/g, ".").toLowerCase()}@example.com`,
  imageUrl: post.author.avatar,
}));
---

<div>
  <!-- Sección 1: Lista de autores -->
  <section>
    <h2>Autores Destacados</h2>
    <br />
    <ul class="flex flex-col">
      {
        people.map((person, index) => (
          <li class="flex gap-x-4 p-2 even:bg-chocolate-300 odd:bg-chocolate-50">
            <img src={person.imageUrl} alt={person.name} class="w-12 h-12" />
            <div>
              <p>{person.name}</p>
              <p>{person.email}</p>
            </div>
          </li>
        ))
      }
    </ul>
  </section>

  <!-- Sección 2: Grid de posts -->
  <br />
  <br />
  <br />
  <section>
    <h2>Últimos Artículos</h2>
    <br />
    <div class="grid grid-cols-3 gap-8">
      {
        posts.map((post, index) => (
          <article class="bg-chocolate-50 first:bg-chocolate-500 last:bg-blue-500 nth-[3]:bg-green-500 nth-last-[2]:bg-pink-500 rounded-2xl overflow-hidden">
            <img src={post.image} alt={post.title} width="400" height="300" />
            <div class="p-4 flex flex-col gap-y-2">
              <span class="text-xs text-chocolate-400 font-medium">
                {post.category.name}
              </span>
              <h3 class="font-bold uppercase">{post.title}</h3>
              <div set:html={post.excerpt} />
              <div>
                <span>{new Date(post.date).toLocaleDateString()}</span>
                {index === 0 && <span>Nuevo</span>}
                {index === posts.length - 1 && <span>Antiguo</span>}
              </div>
            </div>
          </article>
        ))
      }
    </div>
  </section>

  <!-- Sección 3: Tabla de contenidos -->
  <section>
    <h2>Resumen de Contenidos</h2>
    <br />
    <br />

    <table class="rounded-2xl overflow-hidden">
      <thead
        class="uppercase font-bold border-b border-b-chocolate-900 bg-chocolate-500"
      >
        <tr class="rounded-2xl">
          <th class="py-2 px-4">Título</th>
          <th class="py-2 px-4">Autor</th>
          <th class="py-2 px-4">Categoría</th>
          <th class="py-2 px-4">Fecha</th>
        </tr>
      </thead>
      <tbody>
        {
          posts.map((post, index) => (
            <tr class="even:bg-chocolate-100 rounded-2xl">
              <td class="p-2 border-r md:border-r-chocolate-300">
                {post.title}
              </td>
              <td class="p-2 md:border-r md:border-r-chocolate-300 text-center">
                {post.author}
              </td>
              <td class="p-2 md:border-r md:border-r-chocolate-300">
                {post.category.name}
              </td>
              <td class="p-2">{new Date(post.date).toLocaleDateString()}</td>
            </tr>
          ))
        }
      </tbody>
    </table>
  </section>
</div>
